<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Videogames shop</title>
  <meta charset="UTF-8"/>
</head>
<body>
<h1>Список видеоигр</h1>

<!-- Кнопка для перехода на форму добавления новой игры -->
<a th:href="@{/games/new}">
  <button>Добавить игру</button>
</a>

<br/><br/>

<table border="1">
  <thead>
  <tr>
    <th>ID</th>
    <th>Название</th>
    <th>Разработчик</th>
    <th>Жанры</th>
    <th>Год выпуска</th>
    <th>Вес файла</th>
    <th>Действия</th>
  </tr>
  </thead>
  <tbody>
  <tr th:each="game : ${games}">
    <td th:text="${game.id}">ID</td>
    <td th:text="${game.name}">Название игры</td>
    <td th:text="${game.developer}">Разработчик</td>

    <!-- Отображение жанров через запятую или "не указан" -->
    <td>
      <!-- Если список жанров не пуст, перечисляем их через запятую -->
      <span th:if="${!#lists.isEmpty(game.genres)}"
            th:each="genre, iterStat : ${game.genres}"
            th:text="${genre.name} + (!iterStat.last ? '' : ';')">
    </span>
      <!-- Если список жанров пуст, пишем "не указан" -->
      <span th:if="${#lists.isEmpty(game.genres)}">не указан</span>
    </td>


    <td th:text="${game.year}">Год</td>
    <td th:text="${game.fileSize}">Вес</td>

    <td>
      <!-- Кнопка/ссылка на страницу с подробной информацией -->
      <a th:href="@{/games/details/{id}(id=${game.id})}">
        <button>Детали</button>
      </a>

      <!-- Кнопка/ссылка на форму редактирования -->
      <a th:href="@{/games/edit/{id}(id=${game.id})}">
        <button>Редактировать</button>
      </a>

      <!-- Кнопка/ссылка на удаление; onclick - подтверждение -->
      <a th:href="@{/games/delete/{id}(id=${game.id})}"
         onclick="return confirm('Точно удалить игру: [[${game.name}]]?');">
        <button>Удалить</button>
      </a>
    </td>
  </tr>
  </tbody>
</table>
</body>
</html>
